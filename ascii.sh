#!/usr/bin/env sh

# POSIX-SH ASCII Art Generator (SAFE ASCII via font table)
# 5x7 font, side-by-side, newline-safe, ASCII-only (#)
# Usage: ./ascii.sh "HELLO!\nASCII:-)"

set -eu

# Font table: CHAR|row1|row2|row3|row4|row5
# NOTE: Removed shell-hostile chars: ' " `
FONT=$(cat <<'EOF'
 |       |       |       |       |       
!|   #   |   #   |   #   |       |   #   
#| # # # |#######| # # # |#######| # # # 
$|  ###  | # #   |  ###  |   # # |  ###  
%|##    #|##   # |   #   | #   ##|#    ## 
&|  ##   | #  #  |  ##   | #  # #|  ##  # 
(|    #  |   #   |   #   |   #   |    #  
)|  #    |   #   |   #   |   #   |  #    
*|       | # # # |  ###  | # # # |       
+|       |   #   | ##### |   #   |       
,|       |       |       |   #   |  #    
-|       |       | ##### |       |       
.|       |       |       |       |   #   
/|     # |    #  |   #   |  #    | #     
0|  ###  | #   # | #   # | #   # |  ###  
1|   #   |  ##   |   #   |   #   | ##### 
2|  ###  | #   # |    #  |  #    | ##### 
3| ####  |     # |  ###  |     # | ####  
4| #   # | #   # | ##### |     # |     # 
5| ##### | #     | ####  |     # | ####  
6|  #### | #     | ####  | #   # |  ###  
7| ##### |     # |    #  |   #   |  #    
8|  ###  | #   # |  ###  | #   # |  ###  
9|  ###  | #   # |  #### |     # | ####  
:|       |   #   |       |   #   |       
;|       |   #   |       |   #   |  #    
<|    #  |   #   |  #    |   #   |    #  
=|       | ##### |       | ##### |       
>|  #    |   #   |    #  |   #   |  #    
?|  ###  | #   # |    #  |       |   #   
@|  ###  | #   # | # ### | # #   |  #### 
A|  ###  | #   # | ##### | #   # | #   # 
B| ####  | #   # | ####  | #   # | ####  
C|  #### | #     | #     | #     |  #### 
D| ####  | #   # | #   # | #   # | ####  
E| ##### | #     | ####  | #     | ##### 
F| ##### | #     | ####  | #     | #     
G|  #### | #     | #  ## | #   # |  #### 
H| #   # | #   # | ##### | #   # | #   # 
I| ##### |   #   |   #   |   #   | ##### 
J|   ### |     # |     # | #   # |  ###  
K| #   # | #  #  | ###   | #  #  | #   # 
L| #     | #     | #     | #     | ##### 
M| #   # | ## ## | # # # | #   # | #   # 
N| #   # | ##  # | # # # | #  ## | #   # 
O|  ###  | #   # | #   # | #   # |  ###  
P| ####  | #   # | ####  | #     | #     
Q|  ###  | #   # | #   # | #  ## |  #### 
R| ####  | #   # | ####  | #  #  | #   # 
S|  #### | #     |  ###  |     # | ####  
T| ##### |   #   |   #   |   #   |   #   
U| #   # | #   # | #   # | #   # |  ###  
V| #   # | #   # | #   # |  # #  |   #   
W| #   # | #   # | # # # | ## ## | #   # 
X| #   # |  # #  |   #   |  # #  | #   # 
Y| #   # |  # #  |   #   |   #   |   #   
Z| ##### |     # |   ##  | #     | ##### 
[| ####  | #     | #     | #     | ####  
\\| #     |  #    |   #   |    #  |     # 
]|  #### |     # |     # |     # |  #### 
^|   #   |  # #  | #   # |       |       
_|       |       |       |       | ##### 
{|   ##  |   #   |  ##   |   #   |   ##  
||   #   |   #   |   #   |   #   |   #   
}|  ##   |   #   |   ##  |   #   |  ##   
~|       |  ## ##| ## ## |       |       
EOF
)

char_row() {
    ch="$1"; row="$2"
    glyph=$(printf "%s\n" "$FONT" | awk -F'|' -v c="$ch" -v r="$row" '$1==c {print $(r+1)}')
    printf "%s" "${glyph:-       }"
}

TEXT=$(printf "%s" "$*" | tr 'a-z' 'A-Z')

printf "%s\n" "$TEXT" | while IFS= read -r line; do
    row=1
    while [ $row -le 5 ]; do
        i=1
        while [ $i -le ${#line} ]; do
            c=$(printf "%s" "$line" | cut -c $i)
            char_row "$c" "$row"
            printf "  "
            i=$((i+1))
        done
        printf '\n'
        row=$((row+1))
    done
done
